#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <pthread.h>
#include "../include/configuracion.h"

/*
 * char* IP_MEMORIA;
	int PUERTO_MEMORIA;
	int PUERTO_ESCUCHA;
	char* PATH_SUPERBLOQUE;
	char* PATH_BITMAP;
	char* PATH_BLOQUES;
	char* PATH_FCB;
	int RETARDO_ACCESO_BLOQUE;
 * */
int main(void) {
  configuracion configuracion = getConfiguracion();
  printf("%s\n", configuracion.IP_MEMORIA);
  printf("%d\n", configuracion.PUERTO_MEMORIA);
  printf("%d\n", configuracion.PUERTO_ESCUCHA);
  printf("%s\n", configuracion.PATH_SUPERBLOQUE);
  printf("%s\n", configuracion.PATH_BITMAP);
  printf("%s\n", configuracion.PATH_BLOQUES);
  printf("%s\n", configuracion.PATH_FCB);
  printf("%d\n", configuracion.RETARDO_ACCESO_BLOQUE);

  int socketKernel = escucharKernel();

  if(logger != NULL){
  		log_destroy(logger);
  	}



  return EXIT_SUCCESS;
}

int escucharKernel(){
	t_log* logger;
	logger = iniciar_logger();
	//int serv = getServidor();
	log_info(logger, "Se inicia escucha");
	return 22;
}

t_log* iniciar_logger(void)
{
	t_log* nuevo_logger;

	if((nuevo_logger = log_create("fileSystem.log", "FileSystem", 1, LOG_LEVEL_INFO)) == NULL){
		printf("No puede crear el logger");
		exit(1);
	}
	return nuevo_logger;
}
