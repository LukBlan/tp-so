#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <pthread.h>
#include "../include/configuracion.h"
#include "../include/logger.h"
#include <commons/log.h>


int main(void) {
  t_log* logger;
  configuracion configuracion = getConfiguracion("MEMORIA");
  printf("%s\n", configuracion.IP_MEMORIA);
  printf("%d\n", configuracion.PUERTO_MEMORIA);
  printf("%d\n", configuracion.PUERTO_ESCUCHA);
  printf("%s\n", configuracion.PATH_SUPERBLOQUE);
  printf("%s\n", configuracion.PATH_BITMAP);
  printf("%s\n", configuracion.PATH_BLOQUES);
  printf("%s\n", configuracion.PATH_FCB);
  printf("%d\n", configuracion.RETARDO_ACCESO_BLOQUE);

  //escucharKernel() hilos ;
  logger = iniciar_logger();
  log_info(logger, "Se inicia escucha2");
  int socketServidor = crear_servidor("MEMORIA", logger);
  int socketCliente = conectarConServidor("MEMORIA");
  close(socketCliente);


  return EXIT_SUCCESS;
}

/*int escucharKernel(){
	t_log* logger;
	logger = iniciar_logger_fileSystem();
	//int serv = getServidor();
	log_info(logger, "Se inicia escucha");
	if(logger != NULL){
		log_destroy(logger);
	}

	return 22;
}*/


